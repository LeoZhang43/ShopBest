{"ast":null,"code":"var _jsxFileName = \"C:\\\\project2025\\\\ShopBest\\\\frontend\\\\src\\\\components\\\\ProductList.tsx\",\n  _s = $RefreshSig$();\nimport { ProductCard } from \"./ProductCard\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useEffect } from \"react\";\nimport { setProducts, setSearchParameters, setSearchParameterChangeLocally, setPushToPreviousSearchStatus } from \"../store/searchSlice\";\nimport { setFilter } from \"../store/filterSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function ProductList() {\n  _s();\n  const {\n    products,\n    search_parameters_change_locally\n  } = useSelector(state => state.search);\n  const {\n    device,\n    engine,\n    gl,\n    google_domain,\n    hl,\n    q: query,\n    shoprs\n  } = useSelector(state => state.search.search_parameters);\n  const dispatch = useDispatch();\n  function dealData(rowData) {\n    const products = rowData.shopping_results;\n    let search_parameters = rowData.search_parameters;\n    const filters = rowData.filters;\n    if (!(\"shoprs\" in search_parameters)) {\n      search_parameters = {\n        //@ts-ignore\n        ...search_parameters,\n        shoprs: \"\"\n      };\n    }\n    dispatch(setProducts(products));\n    dispatch(setSearchParameters(search_parameters));\n    dispatch(setFilter(filters));\n  }\n  useEffect(() => {\n    const controller = new AbortController();\n    async function fetchData() {\n      if (!query || !search_parameters_change_locally) {\n        return;\n      }\n      const params = new URLSearchParams({\n        q: query,\n        device,\n        engine,\n        gl,\n        hl,\n        google_domain,\n        shoprs\n      });\n      try {\n        const res = await fetch(`http://localhost:8000/api/products?${params.toString()}`, {\n          signal: controller.signal\n        });\n        const data = await res.json();\n        dealData(data);\n      } catch (err) {\n        if (err.name !== \"AbortError\") {\n          console.error(err);\n        }\n      } finally {\n        dispatch(setSearchParameterChangeLocally(false));\n        dispatch(setPushToPreviousSearchStatus(true));\n      }\n    }\n    fetchData();\n    return () => controller.abort();\n  }, [shoprs, device, engine, gl, google_domain, hl, query]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 mb-8 min-w-50\",\n      children: products.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n        ...product\n      }, product.product_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n_s(ProductList, \"4A5/2w2Ac7CW6b56uUJ8Z3WNGrk=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n_c = ProductList;\nvar _c;\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["ProductCard","useSelector","useDispatch","useEffect","setProducts","setSearchParameters","setSearchParameterChangeLocally","setPushToPreviousSearchStatus","setFilter","jsxDEV","_jsxDEV","ProductList","_s","products","search_parameters_change_locally","state","search","device","engine","gl","google_domain","hl","q","query","shoprs","search_parameters","dispatch","dealData","rowData","shopping_results","filters","controller","AbortController","fetchData","params","URLSearchParams","res","fetch","toString","signal","data","json","err","name","console","error","abort","children","className","map","product","product_id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/project2025/ShopBest/frontend/src/components/ProductList.tsx"],"sourcesContent":["import { ProductCard } from \"./ProductCard\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\nimport { setProducts, setSearchParameters, setSearchParameterChangeLocally, setPushToPreviousSearchStatus } from \"../store/searchSlice\";\r\nimport { setFilter } from \"../store/filterSlice\";\r\nimport { RootState } from \"../store/store\";\r\nimport { GoogleShopping, ShoppingResults, FilterElements, SearchParameters } from \"../type\";\r\n\r\nexport function ProductList(){\r\n    const {\r\n        products, \r\n        search_parameters_change_locally\r\n    } = useSelector((state: RootState) => state.search);\r\n    const {\r\n        device,\r\n        engine,\r\n        gl,\r\n        google_domain,\r\n        hl,\r\n        q: query,\r\n        shoprs,\r\n    }  = useSelector((state: RootState) => state.search.search_parameters);\r\n    const dispatch = useDispatch();\r\n\r\n    function dealData(rowData: GoogleShopping){\r\n        const products: ShoppingResults[] = rowData.shopping_results;\r\n        let search_parameters: SearchParameters = rowData.search_parameters;\r\n        const filters: FilterElements[] = rowData.filters;\r\n        if (!(\"shoprs\" in search_parameters)) {\r\n            search_parameters = { \r\n                //@ts-ignore\r\n                ...search_parameters,\r\n                 shoprs: \"\" \r\n            };\r\n        }\r\n        dispatch(setProducts(products));\r\n        dispatch(setSearchParameters(search_parameters));\r\n        dispatch(setFilter(filters));\r\n    }\r\n    \r\n    useEffect(() => {\r\n        const controller = new AbortController();\r\n        async function fetchData() {\r\n            if(!query || !search_parameters_change_locally){\r\n                return;\r\n            }\r\n            const params = new URLSearchParams({\r\n                q: query,\r\n                device,\r\n                engine,\r\n                gl,\r\n                hl,\r\n                google_domain,\r\n                shoprs,\r\n            });\r\n\r\n            try {\r\n                const res = await fetch(`http://localhost:8000/api/products?${params.toString()}`, {\r\n                    signal: controller.signal,\r\n                });\r\n                const data = await res.json();\r\n                dealData(data);\r\n            } catch (err: any) {\r\n                if (err.name !== \"AbortError\") {\r\n                    console.error(err);\r\n                }\r\n            } finally {\r\n                dispatch(setSearchParameterChangeLocally(false));\r\n                dispatch(setPushToPreviousSearchStatus(true));\r\n            }\r\n        }\r\n\r\n        fetchData();\r\n        return () => controller.abort();\r\n    }, [shoprs, device, engine, gl, google_domain, hl, query]);\r\n    \r\n    return(\r\n        <div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 mb-8 min-w-50\">\r\n                {products.map((product) => (\r\n                    <ProductCard key={product.product_id} {...product} />\r\n                ))}\r\n            </div>\r\n\r\n            {/* Load More */}\r\n            {/* <div className=\"flex justify-center\">\r\n                <Button variant=\"outline\" className=\"px-8\">\r\n                Load More Products\r\n                </Button>\r\n            </div> */}\r\n        </div>\r\n    )\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}