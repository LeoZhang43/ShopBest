{"ast":null,"code":"var _jsxFileName = \"C:\\\\project2025\\\\ShopBest\\\\frontend\\\\src\\\\components\\\\features\\\\AutoComplete.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { AutoComplete } from 'antd';\nimport { setQuery } from '../../store/searchSlice';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useQuery } from '@tanstack/react-query';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction useDebounce(value, delay) {\n  _s();\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  React.useEffect(() => {\n    const handler = setTimeout(() => setDebouncedValue(value), delay);\n    return () => clearTimeout(handler);\n  }, [value, delay]);\n  return debouncedValue;\n}\n_s(useDebounce, \"KDuPAtDOgxm8PU6legVJOb3oOmA=\");\nasync function fetchSuggestions(query) {\n  if (!query) return [];\n  const res = await fetch(`http://localhost:8000/api/suggestion?q=${encodeURIComponent(query)}`);\n  const data = await res.json();\n  return data.slice(0, 8);\n}\nexport function AutoCompletion() {\n  _s2();\n  const query = useSelector(state => state.search.search_parameters.q);\n  const dispatch = useDispatch();\n  const debouncedQuery = useDebounce(query, 300);\n  const {\n    data: options = []\n  } = useQuery({\n    queryKey: ['suggestions', debouncedQuery],\n    queryFn: () => fetchSuggestions(debouncedQuery),\n    enabled: !!debouncedQuery,\n    staleTime: 5 * 60 * 1000\n  });\n  const onChange = value => {\n    dispatch(setQuery(value));\n  };\n  const onSearch = value => {\n    dispatch(setQuery(value));\n  };\n  const onSelect = (_value, option) => {\n    dispatch(setQuery(option.label));\n  };\n  return /*#__PURE__*/_jsxDEV(AutoComplete, {\n    options: options,\n    style: {\n      width: 400,\n      height: 50\n    },\n    onChange: onChange,\n    onSelect: onSelect,\n    onSearch: onSearch,\n    value: query,\n    placeholder: \"Search products\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s2(AutoCompletion, \"MI/sZOWGfyJoq8ngyFaVzfRfJUc=\", false, function () {\n  return [useSelector, useDispatch, useDebounce, useQuery];\n});\n_c = AutoCompletion;\nvar _c;\n$RefreshReg$(_c, \"AutoCompletion\");","map":{"version":3,"names":["React","useState","AutoComplete","setQuery","useSelector","useDispatch","useQuery","jsxDEV","_jsxDEV","useDebounce","value","delay","_s","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","fetchSuggestions","query","res","fetch","encodeURIComponent","data","json","slice","AutoCompletion","_s2","state","search","search_parameters","q","dispatch","debouncedQuery","options","queryKey","queryFn","enabled","staleTime","onChange","onSearch","onSelect","_value","option","label","style","width","height","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/project2025/ShopBest/frontend/src/components/features/AutoComplete.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { AutoComplete } from 'antd';\r\nimport { setQuery } from '../../store/searchSlice';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useQuery } from '@tanstack/react-query';\r\n\r\nfunction useDebounce<T>(value: T, delay: number) {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n  React.useEffect(() => {\r\n    const handler = setTimeout(() => setDebouncedValue(value), delay);\r\n    return () => clearTimeout(handler);\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n}\r\n\r\nasync function fetchSuggestions(query: string) {\r\n  if (!query) return [];\r\n  const res = await fetch(`http://localhost:8000/api/suggestion?q=${encodeURIComponent(query)}`);\r\n  const data = await res.json();\r\n  return data.slice(0, 8);\r\n}\r\n\r\nexport function AutoCompletion() {\r\n  const query = useSelector((state: any) => state.search.search_parameters.q);\r\n  const dispatch = useDispatch();\r\n  const debouncedQuery = useDebounce(query, 300);\r\n\r\n  const { data: options = [] } = useQuery({\r\n    queryKey: ['suggestions', debouncedQuery],\r\n    queryFn: () => fetchSuggestions(debouncedQuery),\r\n    enabled: !!debouncedQuery,\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n\r\n  const onChange = (value: string) => {\r\n    dispatch(setQuery(value));\r\n  };\r\n  const onSearch = (value: string) => {\r\n    dispatch(setQuery(value));\r\n  };\r\n  const onSelect = (_value: string, option: any) => {\r\n    dispatch(setQuery(option.label));\r\n  };\r\n\r\n  return (\r\n    <AutoComplete\r\n        options={options}\r\n        style={{ width: 400, height: 50 }}\r\n        onChange={onChange}\r\n        onSelect={onSelect}\r\n        onSearch={onSearch}\r\n        value={query}\r\n        placeholder=\"Search products\"\r\n    />\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}